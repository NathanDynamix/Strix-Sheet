{"version":3,"file":"nivo-sunburst.mjs","sources":["../src/SunburstTooltip.tsx","../src/props.ts","../src/hooks.ts","../src/Arcs.tsx","../src/Sunburst.tsx","../src/ResponsiveSunburst.tsx"],"sourcesContent":["import { BasicTooltip } from '@nivo/tooltip'\nimport { ComputedDatum } from './types'\n\nexport const SunburstTooltip = <RawDatum,>({\n    id,\n    formattedValue,\n    color,\n}: ComputedDatum<RawDatum>) => (\n    <BasicTooltip id={id} value={formattedValue} enableChip={true} color={color} />\n)\n","import { ArcTransitionMode } from '@nivo/arcs'\nimport { OrdinalColorScaleConfig } from '@nivo/colors'\nimport { SunburstTooltip } from './SunburstTooltip'\nimport { SunburstLayerId } from './types'\n\nexport const defaultProps = {\n    id: 'id',\n    value: 'value',\n    cornerRadius: 0,\n    layers: ['arcs', 'arcLabels'] as SunburstLayerId[],\n    colors: { scheme: 'nivo' } as unknown as OrdinalColorScaleConfig,\n    colorBy: 'id' as const,\n    inheritColorFromParent: true,\n    childColor: { from: 'color' },\n    borderWidth: 1,\n    borderColor: 'white',\n    enableArcLabels: false,\n    arcLabel: 'formattedValue',\n    arcLabelsRadiusOffset: 0.5,\n    arcLabelsSkipAngle: 0,\n    arcLabelsSkipRadius: 0,\n    arcLabelsTextColor: { theme: 'labels.text.fill' },\n    animate: true,\n    motionConfig: 'gentle',\n    transitionMode: 'innerRadius' as ArcTransitionMode,\n    isInteractive: true,\n    defs: [],\n    fill: [],\n    tooltip: SunburstTooltip,\n    role: 'img',\n}\n","import { useMemo } from 'react'\nimport { partition as d3Partition, hierarchy as d3Hierarchy } from 'd3-hierarchy'\nimport cloneDeep from 'lodash/cloneDeep.js'\nimport sortBy from 'lodash/sortBy.js'\nimport { usePropertyAccessor, useValueFormatter } from '@nivo/core'\nimport { useTheme } from '@nivo/theming'\nimport { Arc, useArcGenerator } from '@nivo/arcs'\nimport { useOrdinalColorScale, useInheritedColor, InheritedColorConfig } from '@nivo/colors'\nimport {\n    SunburstCommonProps,\n    ComputedDatum,\n    DataProps,\n    DatumId,\n    SunburstCustomLayerProps,\n} from './types'\nimport { defaultProps } from './props'\n\nexport const useSunburst = <RawDatum>({\n    data,\n    id = defaultProps.id,\n    value = defaultProps.value,\n    valueFormat,\n    radius,\n    cornerRadius = defaultProps.cornerRadius,\n    colors = defaultProps.colors,\n    colorBy = defaultProps.colorBy,\n    inheritColorFromParent = defaultProps.inheritColorFromParent,\n    childColor = defaultProps.childColor as InheritedColorConfig<ComputedDatum<RawDatum>>,\n}: {\n    data: DataProps<RawDatum>['data']\n    id?: DataProps<RawDatum>['id']\n    value?: DataProps<RawDatum>['value']\n    valueFormat?: DataProps<RawDatum>['valueFormat']\n    radius: number\n    cornerRadius?: SunburstCommonProps<RawDatum>['cornerRadius']\n    colors?: SunburstCommonProps<RawDatum>['colors']\n    colorBy?: SunburstCommonProps<RawDatum>['colorBy']\n    inheritColorFromParent?: SunburstCommonProps<RawDatum>['inheritColorFromParent']\n    childColor?: SunburstCommonProps<RawDatum>['childColor']\n}) => {\n    const theme = useTheme()\n    const getColor = useOrdinalColorScale<Omit<ComputedDatum<RawDatum>, 'color' | 'fill'>>(\n        colors,\n        colorBy\n    )\n    const getChildColor = useInheritedColor<ComputedDatum<RawDatum>>(childColor, theme)\n\n    const getId = usePropertyAccessor<RawDatum, DatumId>(id)\n    const getValue = usePropertyAccessor<RawDatum, number>(value)\n    const formatValue = useValueFormatter<number>(valueFormat)\n\n    const nodes: ComputedDatum<RawDatum>[] = useMemo(() => {\n        // d3 mutates the data for performance reasons,\n        // however it does not work well with reactive programming,\n        // this ensures that we don't mutate the input data\n        const clonedData = cloneDeep(data)\n\n        const hierarchy = d3Hierarchy(clonedData).sum(getValue)\n\n        const partition = d3Partition<RawDatum>().size([2 * Math.PI, radius * radius])\n        // exclude root node\n        const descendants = partition(hierarchy).descendants().slice(1)\n\n        const total = hierarchy.value ?? 0\n\n        // It's important to sort node by depth,\n        // it ensures that we assign a parent node\n        // which has already been computed, because parent nodes\n        // are going to be computed first\n        const sortedNodes = sortBy(descendants, 'depth')\n\n        return sortedNodes.reduce<ComputedDatum<RawDatum>[]>((acc, descendant) => {\n            const id = getId(descendant.data)\n            // d3 hierarchy node value is optional by default as it depends on\n            // a call to `count()` or `sum()`, and we previously called `sum()`,\n            // d3 typings could be improved and make it non optional when calling\n            // one of those.\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            const value = descendant.value!\n            const percentage = (100 * value) / total\n            const path = descendant.ancestors().map(ancestor => getId(ancestor.data))\n\n            const arc: Arc = {\n                startAngle: descendant.x0,\n                endAngle: descendant.x1,\n                innerRadius: Math.sqrt(descendant.y0),\n                outerRadius: Math.sqrt(descendant.y1),\n            }\n\n            let parent: ComputedDatum<RawDatum> | undefined\n            if (descendant.parent) {\n                // as the parent is defined by the input data, and we sorted the data\n                // by `depth`, we can safely assume it's defined.\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                parent = acc.find(node => node.id === getId(descendant.parent!.data))\n            }\n\n            const normalizedNode: ComputedDatum<RawDatum> = {\n                id,\n                path,\n                value,\n                percentage,\n                formattedValue: valueFormat ? formatValue(value) : `${percentage.toFixed(2)}%`,\n                color: '',\n                arc,\n                data: descendant.data,\n                depth: descendant.depth,\n                height: descendant.height,\n            }\n\n            if (inheritColorFromParent && parent && normalizedNode.depth > 1) {\n                normalizedNode.color = getChildColor(parent, normalizedNode)\n            } else {\n                normalizedNode.color = getColor(normalizedNode)\n            }\n\n            return [...acc, normalizedNode]\n        }, [])\n    }, [\n        data,\n        radius,\n        getValue,\n        getId,\n        valueFormat,\n        formatValue,\n        getColor,\n        inheritColorFromParent,\n        getChildColor,\n    ])\n\n    const arcGenerator = useArcGenerator({ cornerRadius })\n\n    return { arcGenerator, nodes }\n}\n\n/**\n * Memoize the context to pass to custom layers.\n */\nexport const useSunburstLayerContext = <RawDatum>({\n    nodes,\n    arcGenerator,\n    centerX,\n    centerY,\n    radius,\n}: SunburstCustomLayerProps<RawDatum>): SunburstCustomLayerProps<RawDatum> =>\n    useMemo(\n        () => ({\n            nodes,\n            arcGenerator,\n            centerX,\n            centerY,\n            radius,\n        }),\n        [nodes, arcGenerator, centerX, centerY, radius]\n    )\n","import { createElement, useMemo } from 'react'\nimport * as React from 'react'\nimport { ArcGenerator, ArcsLayer } from '@nivo/arcs'\nimport { ComputedDatum, SunburstCommonProps, MouseHandlers } from './types'\nimport { useTooltip } from '@nivo/tooltip'\n\ninterface ArcsProps<RawDatum> {\n    center: [number, number]\n    data: ComputedDatum<RawDatum>[]\n    arcGenerator: ArcGenerator\n    borderWidth: SunburstCommonProps<RawDatum>['borderWidth']\n    borderColor: SunburstCommonProps<RawDatum>['borderColor']\n    isInteractive: SunburstCommonProps<RawDatum>['isInteractive']\n    onClick?: MouseHandlers<RawDatum>['onClick']\n    onMouseEnter?: MouseHandlers<RawDatum>['onMouseEnter']\n    onMouseMove?: MouseHandlers<RawDatum>['onMouseMove']\n    onMouseLeave?: MouseHandlers<RawDatum>['onMouseLeave']\n    tooltip: SunburstCommonProps<RawDatum>['tooltip']\n    transitionMode: SunburstCommonProps<RawDatum>['transitionMode']\n}\n\nexport const Arcs = <RawDatum,>({\n    center,\n    data,\n    arcGenerator,\n    borderWidth,\n    borderColor,\n    isInteractive,\n    onClick,\n    onMouseEnter,\n    onMouseMove,\n    onMouseLeave,\n    tooltip,\n    transitionMode,\n}: ArcsProps<RawDatum>) => {\n    const { showTooltipFromEvent, hideTooltip } = useTooltip()\n\n    const handleClick = useMemo(() => {\n        if (!isInteractive) return undefined\n\n        return (datum: ComputedDatum<RawDatum>, event: React.MouseEvent<SVGPathElement>) => {\n            onClick?.(datum, event)\n        }\n    }, [isInteractive, onClick])\n\n    const handleMouseEnter = useMemo(() => {\n        if (!isInteractive) return undefined\n\n        return (datum: ComputedDatum<RawDatum>, event: React.MouseEvent<SVGPathElement>) => {\n            showTooltipFromEvent(createElement(tooltip, datum), event)\n            onMouseEnter?.(datum, event)\n        }\n    }, [isInteractive, showTooltipFromEvent, tooltip, onMouseEnter])\n\n    const handleMouseMove = useMemo(() => {\n        if (!isInteractive) return undefined\n\n        return (datum: ComputedDatum<RawDatum>, event: React.MouseEvent<SVGPathElement>) => {\n            showTooltipFromEvent(createElement(tooltip, datum), event)\n            onMouseMove?.(datum, event)\n        }\n    }, [isInteractive, showTooltipFromEvent, tooltip, onMouseMove])\n\n    const handleMouseLeave = useMemo(() => {\n        if (!isInteractive) return undefined\n\n        return (datum: ComputedDatum<RawDatum>, event: React.MouseEvent<SVGPathElement>) => {\n            hideTooltip()\n            onMouseLeave?.(datum, event)\n        }\n    }, [isInteractive, hideTooltip, onMouseLeave])\n\n    return (\n        <ArcsLayer<ComputedDatum<RawDatum>>\n            center={center}\n            data={data}\n            arcGenerator={arcGenerator}\n            borderWidth={borderWidth}\n            borderColor={borderColor}\n            transitionMode={transitionMode}\n            onClick={handleClick}\n            onMouseEnter={handleMouseEnter}\n            onMouseMove={handleMouseMove}\n            onMouseLeave={handleMouseLeave}\n        />\n    )\n}\n","import { Fragment, ReactNode, createElement, useMemo, forwardRef, Ref, ReactElement } from 'react'\nimport {\n    // @ts-expect-error no types\n    bindDefs,\n    Container,\n    SvgWrapper,\n    useDimensions,\n    WithChartRef,\n} from '@nivo/core'\nimport { ArcLabelsLayer } from '@nivo/arcs'\nimport { defaultProps } from './props'\nimport { useSunburst, useSunburstLayerContext } from './hooks'\nimport { SunburstSvgProps, SunburstLayerId, SunburstLayer, ComputedDatum } from './types'\nimport { Arcs } from './Arcs'\nimport { InheritedColorConfig } from '@nivo/colors'\n\ntype InnerSunburstProps<RawDatum> = Partial<\n    Omit<\n        SunburstSvgProps<RawDatum>,\n        'data' | 'width' | 'height' | 'isInteractive' | 'animate' | 'motionConfig'\n    >\n> &\n    Pick<SunburstSvgProps<RawDatum>, 'data' | 'width' | 'height' | 'isInteractive'> & {\n        forwardedRef: Ref<SVGSVGElement>\n    }\n\nconst InnerSunburst = <RawDatum,>({\n    data,\n    id = defaultProps.id,\n    value = defaultProps.value,\n    valueFormat,\n    cornerRadius = defaultProps.cornerRadius,\n    layers = defaultProps.layers as SunburstLayer<RawDatum>[],\n    colors = defaultProps.colors,\n    colorBy = defaultProps.colorBy,\n    inheritColorFromParent = defaultProps.inheritColorFromParent,\n    childColor = defaultProps.childColor as InheritedColorConfig<ComputedDatum<RawDatum>>,\n    borderWidth = defaultProps.borderWidth,\n    borderColor = defaultProps.borderColor,\n    margin: partialMargin,\n    width,\n    height,\n    enableArcLabels = defaultProps.enableArcLabels,\n    arcLabel = defaultProps.arcLabel,\n    arcLabelsRadiusOffset = defaultProps.arcLabelsRadiusOffset,\n    arcLabelsSkipAngle = defaultProps.arcLabelsSkipAngle,\n    arcLabelsSkipRadius = defaultProps.arcLabelsSkipRadius,\n    arcLabelsTextColor = defaultProps.arcLabelsTextColor,\n    arcLabelsComponent,\n    defs = defaultProps.defs,\n    fill = defaultProps.fill,\n    transitionMode = defaultProps.transitionMode,\n    isInteractive = defaultProps.isInteractive,\n    onClick,\n    onMouseEnter,\n    onMouseLeave,\n    onMouseMove,\n    tooltip = defaultProps.tooltip,\n    role = defaultProps.role,\n    forwardedRef,\n}: InnerSunburstProps<RawDatum>) => {\n    const { innerHeight, innerWidth, margin, outerHeight, outerWidth } = useDimensions(\n        width,\n        height,\n        partialMargin\n    )\n\n    const { centerX, centerY, radius } = useMemo(() => {\n        const radius = Math.min(innerWidth, innerHeight) / 2\n\n        return { radius, centerX: innerWidth / 2, centerY: innerHeight / 2 }\n    }, [innerHeight, innerWidth])\n\n    const { arcGenerator, nodes } = useSunburst({\n        data,\n        id,\n        value,\n        valueFormat,\n        radius,\n        cornerRadius,\n        colors,\n        colorBy,\n        inheritColorFromParent,\n        childColor,\n    })\n\n    const boundDefs = bindDefs(defs, nodes, fill, {\n        colorKey: 'color',\n        targetKey: 'fill',\n    })\n\n    const layerById: Record<SunburstLayerId, ReactNode> = {\n        arcs: null,\n        arcLabels: null,\n    }\n\n    if (layers.includes('arcs')) {\n        layerById.arcs = (\n            <Arcs<RawDatum>\n                key=\"arcs\"\n                center={[centerX, centerY]}\n                data={nodes}\n                arcGenerator={arcGenerator}\n                borderWidth={borderWidth}\n                borderColor={borderColor}\n                transitionMode={transitionMode}\n                isInteractive={isInteractive}\n                tooltip={tooltip}\n                onClick={onClick}\n                onMouseEnter={onMouseEnter}\n                onMouseLeave={onMouseLeave}\n                onMouseMove={onMouseMove}\n            />\n        )\n    }\n\n    if (enableArcLabels && layers.includes('arcLabels')) {\n        layerById.arcLabels = (\n            <ArcLabelsLayer<ComputedDatum<RawDatum>>\n                key=\"arcLabels\"\n                center={[centerX, centerY]}\n                data={nodes}\n                label={arcLabel}\n                radiusOffset={arcLabelsRadiusOffset}\n                skipAngle={arcLabelsSkipAngle}\n                skipRadius={arcLabelsSkipRadius}\n                textColor={arcLabelsTextColor}\n                transitionMode={transitionMode}\n                component={arcLabelsComponent}\n            />\n        )\n    }\n\n    const layerContext = useSunburstLayerContext<RawDatum>({\n        nodes,\n        arcGenerator,\n        centerX,\n        centerY,\n        radius,\n    })\n\n    return (\n        <SvgWrapper\n            width={outerWidth}\n            height={outerHeight}\n            defs={boundDefs}\n            margin={margin}\n            role={role}\n            ref={forwardedRef}\n        >\n            {layers.map((layer, i) => {\n                if (layerById[layer as SunburstLayerId] !== undefined) {\n                    return layerById[layer as SunburstLayerId]\n                }\n\n                if (typeof layer === 'function') {\n                    return <Fragment key={i}>{createElement(layer, layerContext)}</Fragment>\n                }\n\n                return null\n            })}\n        </SvgWrapper>\n    )\n}\n\nexport const Sunburst = forwardRef(\n    <RawDatum,>(\n        {\n            isInteractive = defaultProps.isInteractive,\n            animate = defaultProps.animate,\n            motionConfig = defaultProps.motionConfig,\n            theme,\n            renderWrapper,\n            ...props\n        }: Partial<Omit<SunburstSvgProps<RawDatum>, 'data' | 'width' | 'height'>> &\n            Pick<SunburstSvgProps<RawDatum>, 'data' | 'width' | 'height'>,\n        ref: Ref<SVGSVGElement>\n    ) => (\n        <Container\n            isInteractive={isInteractive}\n            animate={animate}\n            motionConfig={motionConfig}\n            theme={theme}\n            renderWrapper={renderWrapper}\n        >\n            <InnerSunburst<RawDatum> {...props} isInteractive={isInteractive} forwardedRef={ref} />\n        </Container>\n    )\n) as <RawDatum>(\n    props: WithChartRef<\n        Partial<Omit<SunburstSvgProps<RawDatum>, 'data' | 'width' | 'height'>> &\n            Pick<SunburstSvgProps<RawDatum>, 'data' | 'width' | 'height'>,\n        SVGSVGElement\n    >\n) => ReactElement\n","import { forwardRef, Ref, ReactElement } from 'react'\nimport { ResponsiveWrapper, ResponsiveProps, WithChartRef } from '@nivo/core'\nimport { Sunburst } from './Sunburst'\nimport { SunburstSvgProps } from './types'\n\ntype ResponsiveSunburstProps<RawDatum> = ResponsiveProps<\n    Partial<Omit<SunburstSvgProps<RawDatum>, 'data' | 'width' | 'height'>> &\n        Pick<SunburstSvgProps<RawDatum>, 'data'>\n>\n\nexport const ResponsiveSunburst = forwardRef(\n    <RawDatum,>(\n        {\n            defaultWidth,\n            defaultHeight,\n            onResize,\n            debounceResize,\n            ...props\n        }: ResponsiveSunburstProps<RawDatum>,\n        ref: Ref<SVGSVGElement>\n    ) => (\n        <ResponsiveWrapper\n            defaultWidth={defaultWidth}\n            defaultHeight={defaultHeight}\n            onResize={onResize}\n            debounceResize={debounceResize}\n        >\n            {({ width, height }) => (\n                <Sunburst<RawDatum> {...props} width={width} height={height} ref={ref} />\n            )}\n        </ResponsiveWrapper>\n    )\n) as <RawDatum>(\n    props: WithChartRef<ResponsiveSunburstProps<RawDatum>, SVGSVGElement>\n) => ReactElement\n"],"names":["defaultProps","id","value","cornerRadius","layers","colors","scheme","colorBy","inheritColorFromParent","childColor","from","borderWidth","borderColor","enableArcLabels","arcLabel","arcLabelsRadiusOffset","arcLabelsSkipAngle","arcLabelsSkipRadius","arcLabelsTextColor","theme","animate","motionConfig","transitionMode","isInteractive","defs","fill","tooltip","_ref","formattedValue","color","_jsx","BasicTooltip","enableChip","role","useSunburst","data","_ref$id","_ref$value","valueFormat","radius","_ref$cornerRadius","_ref$colors","_ref$colorBy","_ref$inheritColorFrom","_ref$childColor","useTheme","getColor","useOrdinalColorScale","getChildColor","useInheritedColor","getId","usePropertyAccessor","getValue","formatValue","useValueFormatter","nodes","useMemo","_hierarchy$value","clonedData","cloneDeep","hierarchy","d3Hierarchy","sum","descendants","d3Partition","size","Math","PI","partition","slice","total","sortBy","reduce","acc","descendant","parent","percentage","path","ancestors","map","ancestor","arc","startAngle","x0","endAngle","x1","innerRadius","sqrt","y0","outerRadius","y1","find","node","normalizedNode","toFixed","depth","height","concat","arcGenerator","useArcGenerator","useSunburstLayerContext","_ref2","centerX","centerY","Arcs","center","onClick","onMouseEnter","onMouseMove","onMouseLeave","_useTooltip","useTooltip","showTooltipFromEvent","hideTooltip","handleClick","datum","event","handleMouseEnter","createElement","handleMouseMove","handleMouseLeave","ArcsLayer","InnerSunburst","_ref$layers","_ref$borderWidth","_ref$borderColor","partialMargin","margin","width","_ref$enableArcLabels","_ref$arcLabel","_ref$arcLabelsRadiusO","_ref$arcLabelsSkipAng","_ref$arcLabelsSkipRad","_ref$arcLabelsTextCol","arcLabelsComponent","_ref$defs","_ref$fill","_ref$transitionMode","_ref$isInteractive","_ref$tooltip","_ref$role","forwardedRef","_useDimensions","useDimensions","innerHeight","innerWidth","outerHeight","outerWidth","_useMemo","min","_useSunburst","boundDefs","bindDefs","colorKey","targetKey","layerById","arcs","arcLabels","includes","ArcLabelsLayer","label","radiusOffset","skipAngle","skipRadius","textColor","component","layerContext","SvgWrapper","ref","children","layer","i","undefined","Fragment","Sunburst","forwardRef","_ref2$isInteractive","_ref2$animate","_ref2$motionConfig","renderWrapper","props","_objectWithoutPropertiesLoose","_excluded","Container","_extends","ResponsiveSunburst","defaultWidth","defaultHeight","onResize","debounceResize","ResponsiveWrapper"],"mappings":"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"}