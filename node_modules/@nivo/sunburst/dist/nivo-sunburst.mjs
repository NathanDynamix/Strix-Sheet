import{useMemo as e,createElement as r,forwardRef as o,Fragment as i}from"react";import{usePropertyAccessor as t,useValueFormatter as n,Container as a,useDimensions as l,bindDefs as d,SvgWrapper as c,ResponsiveWrapper as s}from"@nivo/core";import{useArcGenerator as u,ArcsLayer as v,ArcLabelsLayer as f}from"@nivo/arcs";import{BasicTooltip as h,useTooltip as m}from"@nivo/tooltip";import{jsx as p}from"react/jsx-runtime";import{hierarchy as b,partition as g}from"d3-hierarchy";import C from"lodash/cloneDeep.js";import L from"lodash/sortBy.js";import{useTheme as M}from"@nivo/theming";import{useOrdinalColorScale as R,useInheritedColor as y}from"@nivo/colors";function W(){return W=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var i in o)({}).hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},W.apply(null,arguments)}function k(e,r){if(null==e)return{};var o={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==r.indexOf(i))continue;o[i]=e[i]}return o}var x={id:"id",value:"value",cornerRadius:0,layers:["arcs","arcLabels"],colors:{scheme:"nivo"},colorBy:"id",inheritColorFromParent:!0,childColor:{from:"color"},borderWidth:1,borderColor:"white",enableArcLabels:!1,arcLabel:"formattedValue",arcLabelsRadiusOffset:.5,arcLabelsSkipAngle:0,arcLabelsSkipRadius:0,arcLabelsTextColor:{theme:"labels.text.fill"},animate:!0,motionConfig:"gentle",transitionMode:"innerRadius",isInteractive:!0,defs:[],fill:[],tooltip:function(e){var r=e.id,o=e.formattedValue,i=e.color;return p(h,{id:r,value:o,enableChip:!0,color:i})},role:"img"},F=function(r){var o=r.data,i=r.id,a=void 0===i?x.id:i,l=r.value,d=void 0===l?x.value:l,c=r.valueFormat,s=r.radius,v=r.cornerRadius,f=void 0===v?x.cornerRadius:v,h=r.colors,m=void 0===h?x.colors:h,p=r.colorBy,W=void 0===p?x.colorBy:p,k=r.inheritColorFromParent,F=void 0===k?x.inheritColorFromParent:k,I=r.childColor,w=void 0===I?x.childColor:I,A=M(),O=R(m,W),P=y(w,A),G=t(a),z=t(d),B=n(c),S=e((function(){var e,r=C(o),i=b(r).sum(z),t=g().size([2*Math.PI,s*s])(i).descendants().slice(1),n=null!=(e=i.value)?e:0;return L(t,"depth").reduce((function(e,r){var o,i=G(r.data),t=r.value,a=100*t/n,l=r.ancestors().map((function(e){return G(e.data)})),d={startAngle:r.x0,endAngle:r.x1,innerRadius:Math.sqrt(r.y0),outerRadius:Math.sqrt(r.y1)};r.parent&&(o=e.find((function(e){return e.id===G(r.parent.data)})));var s={id:i,path:l,value:t,percentage:a,formattedValue:c?B(t):a.toFixed(2)+"%",color:"",arc:d,data:r.data,depth:r.depth,height:r.height};return F&&o&&s.depth>1?s.color=P(o,s):s.color=O(s),[].concat(e,[s])}),[])}),[o,s,z,G,c,B,O,F,P]);return{arcGenerator:u({cornerRadius:f}),nodes:S}},I=function(r){var o=r.nodes,i=r.arcGenerator,t=r.centerX,n=r.centerY,a=r.radius;return e((function(){return{nodes:o,arcGenerator:i,centerX:t,centerY:n,radius:a}}),[o,i,t,n,a])},w=function(o){var i=o.center,t=o.data,n=o.arcGenerator,a=o.borderWidth,l=o.borderColor,d=o.isInteractive,c=o.onClick,s=o.onMouseEnter,u=o.onMouseMove,f=o.onMouseLeave,h=o.tooltip,b=o.transitionMode,g=m(),C=g.showTooltipFromEvent,L=g.hideTooltip,M=e((function(){if(d)return function(e,r){null==c||c(e,r)}}),[d,c]),R=e((function(){if(d)return function(e,o){C(r(h,e),o),null==s||s(e,o)}}),[d,C,h,s]),y=e((function(){if(d)return function(e,o){C(r(h,e),o),null==u||u(e,o)}}),[d,C,h,u]),W=e((function(){if(d)return function(e,r){L(),null==f||f(e,r)}}),[d,L,f]);return p(v,{center:i,data:t,arcGenerator:n,borderWidth:a,borderColor:l,transitionMode:b,onClick:M,onMouseEnter:R,onMouseMove:y,onMouseLeave:W})},A=["isInteractive","animate","motionConfig","theme","renderWrapper"],O=function(o){var t=o.data,n=o.id,a=void 0===n?x.id:n,s=o.value,u=void 0===s?x.value:s,v=o.valueFormat,h=o.cornerRadius,m=void 0===h?x.cornerRadius:h,b=o.layers,g=void 0===b?x.layers:b,C=o.colors,L=void 0===C?x.colors:C,M=o.colorBy,R=void 0===M?x.colorBy:M,y=o.inheritColorFromParent,W=void 0===y?x.inheritColorFromParent:y,k=o.childColor,A=void 0===k?x.childColor:k,O=o.borderWidth,P=void 0===O?x.borderWidth:O,G=o.borderColor,z=void 0===G?x.borderColor:G,B=o.margin,S=o.width,j=o.height,E=o.enableArcLabels,H=void 0===E?x.enableArcLabels:E,T=o.arcLabel,X=void 0===T?x.arcLabel:T,Y=o.arcLabelsRadiusOffset,V=void 0===Y?x.arcLabelsRadiusOffset:Y,q=o.arcLabelsSkipAngle,K=void 0===q?x.arcLabelsSkipAngle:q,D=o.arcLabelsSkipRadius,J=void 0===D?x.arcLabelsSkipRadius:D,N=o.arcLabelsTextColor,Q=void 0===N?x.arcLabelsTextColor:N,U=o.arcLabelsComponent,Z=o.defs,$=void 0===Z?x.defs:Z,_=o.fill,ee=void 0===_?x.fill:_,re=o.transitionMode,oe=void 0===re?x.transitionMode:re,ie=o.isInteractive,te=void 0===ie?x.isInteractive:ie,ne=o.onClick,ae=o.onMouseEnter,le=o.onMouseLeave,de=o.onMouseMove,ce=o.tooltip,se=void 0===ce?x.tooltip:ce,ue=o.role,ve=void 0===ue?x.role:ue,fe=o.forwardedRef,he=l(S,j,B),me=he.innerHeight,pe=he.innerWidth,be=he.margin,ge=he.outerHeight,Ce=he.outerWidth,Le=e((function(){return{radius:Math.min(pe,me)/2,centerX:pe/2,centerY:me/2}}),[me,pe]),Me=Le.centerX,Re=Le.centerY,ye=Le.radius,We=F({data:t,id:a,value:u,valueFormat:v,radius:ye,cornerRadius:m,colors:L,colorBy:R,inheritColorFromParent:W,childColor:A}),ke=We.arcGenerator,xe=We.nodes,Fe=d($,xe,ee,{colorKey:"color",targetKey:"fill"}),Ie={arcs:null,arcLabels:null};g.includes("arcs")&&(Ie.arcs=p(w,{center:[Me,Re],data:xe,arcGenerator:ke,borderWidth:P,borderColor:z,transitionMode:oe,isInteractive:te,tooltip:se,onClick:ne,onMouseEnter:ae,onMouseLeave:le,onMouseMove:de},"arcs")),H&&g.includes("arcLabels")&&(Ie.arcLabels=p(f,{center:[Me,Re],data:xe,label:X,radiusOffset:V,skipAngle:K,skipRadius:J,textColor:Q,transitionMode:oe,component:U},"arcLabels"));var we=I({nodes:xe,arcGenerator:ke,centerX:Me,centerY:Re,radius:ye});return p(c,{width:Ce,height:ge,defs:Fe,margin:be,role:ve,ref:fe,children:g.map((function(e,o){return void 0!==Ie[e]?Ie[e]:"function"==typeof e?p(i,{children:r(e,we)},o):null}))})},P=o((function(e,r){var o=e.isInteractive,i=void 0===o?x.isInteractive:o,t=e.animate,n=void 0===t?x.animate:t,l=e.motionConfig,d=void 0===l?x.motionConfig:l,c=e.theme,s=e.renderWrapper,u=k(e,A);return p(a,{isInteractive:i,animate:n,motionConfig:d,theme:c,renderWrapper:s,children:p(O,W({},u,{isInteractive:i,forwardedRef:r}))})})),G=["defaultWidth","defaultHeight","onResize","debounceResize"],z=o((function(e,r){var o=e.defaultWidth,i=e.defaultHeight,t=e.onResize,n=e.debounceResize,a=k(e,G);return p(s,{defaultWidth:o,defaultHeight:i,onResize:t,debounceResize:n,children:function(e){var o=e.width,i=e.height;return p(P,W({},a,{width:o,height:i,ref:r}))}})}));export{z as ResponsiveSunburst,P as Sunburst,x as defaultProps,F as useSunburst,I as useSunburstLayerContext};
//# sourceMappingURL=nivo-sunburst.mjs.map
